# ==========================================================================================================
#
# RMD Strawman ("Sunshine++") configuration file for F_SIM
#
# This file demonstrates how to set various parameters for the simulator to exercise with.
#
# Parameters have scoping rules - closer to actual specific agents in the block over-ride global settings.
#
# For example, the "verbose" flag may be over-ridden by later stages of configuration.  The global setting
# is least-binding, while the per-unit setting is most binding.  So if a specific agent setting says "be
# verbose", then it does not matter what other settings indicated.
#
# ==========================================================================================================
#
# Enumerate the list of machines to be used in distributed simulation runs
#

# ==========================================================================================================
# Set up the basic parameters for a top-level single board of Sunshine to simulate - counts of objects and sizes.

[environment]
   WORKLOAD_INSTALL = .
   WORKLOAD_EXEC = .

[TricksGlobal]
   cfg_area_size = 4                            # KB reserved by the ELF loader process
[MachineGlobal]
   rack_count    = 1                            # number of racks in the machine
   cube_count    = 1                            # number of hypercube 8-socket units per rack
   socket_count  = 1                            # number of populated sockets per hypercube
   trace         = 0                            # level and types of trace info to log in output (0 = off)
   verbose       = false                         # default don't speak about spurious things

[SocketGlobal]
   ipm_count     = 1                            # number of MCs to internal in-package memory per socket
   ipm_size      = 16                           # size in MB per MC for IPM

   dram_count    = 1                            # number of MCs to external DRAM banks per socket
   dram_size     = 1536                         # size in MB per MC for external DRAM

   nvm_count     = 1                            # number of MCs to external NVM banks per socket
   nvm_size      = 128                          # size in MB per MC for external NVM

   cluster_count = 1                            # number of on-die clusters per socket

   fw_img_fname  = $(TG_INSTALL)/lib/fw.img          # file to load
   ce_img_fname  = $(WORKLOAD_INSTALL)/tgkrnl        # file to load
   xe_img_fname  = $(WORKLOAD_INSTALL)/printf        # file to load
   bin_img_fname = $(WORKLOAD_INSTALL)/printf.blob  # file to load

[ipmGlobal]
   verbose       = false
   trace         = 0                            # level and types of trace info to log in output (0 = off)

[dramGlobal]
   verbose       = false
   trace         = 0                            # level and types of trace info to log in output (0 = off)

[nvmGlobal]
   verbose       = false
   trace         = 0                            # level and types of trace info to log in output (0 = off)

[ClusterGlobal]
   sL3_count     = 1                            # how many logical sL3 units exist per cluster
   sL3_size      = 8                            # size in KB for each sL3 unit per cluster
   verbose       = false
   trace         = 0                            # level and types of trace info to log in output (0 = off)
   block_count   = 1

[sl3Global]
   verbose       = false
   trace         = 0                            # level and types of trace info to log in output (0 = off)

[BlockGlobal]
   ce_count      = 1                           # ONLY one CE unit in a block will currently work due to QEMU internals
   xe_count      = 8                           # eight XE units in a block - each XE may have its own section defined below
   nlni_count    = 1                           # one next-level network-interface module per block is expected
   lsqdepth      = 16                          # How many buffer slots does the common network interface use for in/out queues (originating)
   lsqnetdepth   = 16                          # How many buffer slots does the common network interface use for in/out queues (receiving)
   sl2_count     = 1                           # how many logical sL2 entities per block
   sl2_size      = 2048                        # how many KB is each sL2 entity
   sl1_size      = 64                          # how many KB is each sL1 entity
   num_chains    = 8                           # how many concurrent hardware chains does each chain unit support
   num_dma_buffers = 8                         # how many active concurrent DMA operations can be in progress in the DMA unit
   num_dma_ops     = 16                        # how many DMA operations can be floating around per DMA unit
   num_qma_queues  = 8                         # how many QMA queues will each QMA unit offer
   num_qma_ops     = 16                        # how many QMA operations can be in flight around the QMA queues
   verbose       = false                        # global setting: should we be verbose or not? Can be over-ridden per unit below
   trace         = 0x320000                    # per bit definitions in tg/common/include/tg-trace-values.h
   cache_defined = 1                           # create a cache module for this agent class
   cache_sizeKB    = 32                        # size in KB for cache module
   cache_assoc   = 4                           # associativity for the cache
   cache_lineSZ  = 64                          # line size in bytes for cache module
   cache_policy  = 0x5                         # policy for the cache; at this time, only mode "0x5" (wite-back, write-allocate) is supported!

   logfilebase   = printf.log                  # what is the BASE path+filename to write log files to, default is STDERR

[sl2Global]
   verbose       = false
   trace         = 0                            # level and types of trace info to log in output (0 = off)

[CEglobal]
   qemu_args     =                             # command-line to provide to QEMU when it is launched
#   qemu_args     = -s                          # command-line to provide to QEMU when it is launched
#   qemu_args     = -s -S                       # command-line to provide to QEMU when it is launched
   krnl_args     = -mbboot -mbsafepayload      # command-line to provide to XSTGKRNL
   logfile_redir = 0                           # ignore normal logfile routines; redirect all output for these to STDOUT if set to non-zero value
   cache_defined = 1                           # create a cache module for this agent class
   verbose       = true
   trace         = 0x220000                  # per bit definitions in ss/common/include/tg-trace.h
   enabled       = 1

[XEglobal]
   cache_defined = 1                           # create a cache module for this agent class
   trace         = 0x6                  # per bit definitions in ss/common/include/tg-trace.h
   verbose       = true
   enabled       = 1

# ==========================================================================================================
# Configure the basic parameters of each next-level network-interface unit
#

[NLNIglobal]
   verbose       = false
   trace         = 0                            # level and types of trace info to log in output (0 = off)
# ==========================================================================================================
#
#  Default values for energy estimation knobs.
#
# ==========================================================================================================

[DVFS]
   num_bins = 2

[DVFSBin0]
   voltage_V = 0.75
   frequency_divisor = 1
   active_power_mW = 0.7
   static_power_mW = 0.3

[DVFSBin1]
   voltage_V = 0.5
   frequency_divisor = 2
   active_power_mW = 0.3
   static_power_mW = 0.2

[ChipLayout]
   chip_height_mm = 22
   chip_width_mm = 22
   chip_height_num_units = 2
   chip_width_num_units = 2
   unit_height_num_blocks = 4
   unit_width_num_blocks = 2
   data_movement_cost = 0.1   # pJ/bit/mm
   dram_transfer_cost = 5     # pJ/bit

[EnergyGlobal]
   max_freq_MHz  = 1000                         # maximum core frequency

[ipmGlobal]
   ipm_latency   = 75

[dramGlobal]
   dram_latency   = 75

[nvmGlobal]
   nvm_latency   = 300

[sl3Global]
   sl3_latency   = 22

[BlockGlobal]
   static_power_clockgate    = 0.1
   static_power_powergate_soft_mW    = 0.1

[sl2Global]
   sl2_latency   = 8

[NLNIglobal]
   static_power_clockgate    = 0.1
   static_power_powergate_soft_mW    = 0.1
   intrablock_cost    = 1
   intraunit_cost     = 3
   block_to_unit_cost = 9
   intrachip_cost     = 27
   unit_to_chip_cost  = 81
   intraboard_cost    = 243
   chip_to_board_cost = 729
   interboard_cost    = 2187

[environment]
    TG_INSTALL = /home/bseshasa/xstg/tg/tg/install

